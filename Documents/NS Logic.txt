Логика работы насосной станции

НС - это специальным образом сконфигурированное направление
К НС подключить
- Пожарные насосы
- Жокей насосы
- дренажные насосы
- АМ1-Т
Количество насосов не ограничено
АМ1-Т может быть только одна

У НС есть два параметра - количество основных ПН и время разновременного пуска

У пожарного насоса может быть настроено дополнительное условие включения

Условие включения НС
- НС находится в автоматическом режиме
- Выполнено условие в логике срабатывания Направления(по входным зонам и устройствам)
- Все не ПН и АМ-1Т не находится в состоянии неисправность(для ДН должно быть не неисправность, а аварийный уровень, но в текущей реализации ГК это невозможно), отключено или автоматика отключена

Если это условие выполнилось, то отсчитывается задержка НС, НС переходит в сосояние включено
Далее с интервалом разновременного пуска производится включение ПН

Условие включения ПН
- ПН находится в автоматическом режиме
- Выполнено дополнительное условие включения ПН(если есть)
- Все не ПН и АМ1-Т не находятся в состоянии неисправность
- Количество ПН в состоянии Включено или Включается меньше количества основных ПН

При включении НС подается команда на запрет пуска ЖН
При выключении НС подается команда на отмену запрета пуска ЖН

Не хватает следующего функционала
- В случае неисправности насосоа его задержка не должна ждать
- Не выход насоса не режим сопровождается информационным сообщением без перехода в состояние неисправность
- В случае пуска НС нужна давать команду запрет пуска ЖН в автоматическом режиме