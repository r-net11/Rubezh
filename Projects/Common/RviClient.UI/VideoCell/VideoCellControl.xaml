<UserControl x:Class="RviClient.UI.VideoCellControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
			 xmlns:mediaSourcePlayer="clr-namespace:MediaSourcePlayer;assembly=MediaSourcePlayer"
			 xmlns:rviClientUi="clr-namespace:RviClient.UI.VideoCell"
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300"
			 x:Name="videoCellControl">
	<Grid x:Name="topGrid">
		<WindowsFormsHost>
			<rviClientUi:PlayerPanel x:Name="playerPanel"/>
		</WindowsFormsHost>

		<!-- Компонент удаляется из визуального дерева и помещается в playerPanel.HostedElement в конструкторе --> 
		<mediaSourcePlayer:MediaPlayer Name="mediaPlayer"/>

		<!-- Компонент удаляется из визуального дерева и помещается в playerPanel.TopToolbarContent в конструкторе -->
		<Grid x:Name="topToolbarGrid" Background="{StaticResource BackgroundBrush}">
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="*"/>
				<ColumnDefinition Width="Auto"/>
			</Grid.ColumnDefinitions>
			<TextBlock Grid.Column="0"
					   x:Name="topToolbarTitleTextBlock"
					   Text="{Binding  ElementName=videoCellControl, Path=TopToolbarTitle}"
					   Foreground="White"
					   VerticalAlignment="Center"
					   Margin="2"/>
			<ToggleButton Grid.Column="1" x:Name="videoAspectRatioToggleButton"
						  Width="28"
						  Height="28"
						  Margin="0"
						  IsChecked="False"
						  ToolTip="Соотношение сторон кадра"
						  Checked="VideoAspectRatioToggleButton_OnChecked"
						  Unchecked="VideoAspectRatioToggleButton_OnUnchecked">
				<Grid>
					<Path
						Margin="0"
						Width="20"
						Height="20"
						Stretch="Uniform"
						Stroke="White"
						Visibility="{Binding ElementName=videoAspectRatioToggleButton,Path=IsChecked,Converter={StaticResource InversedBoolToVisibilityConverter}}"
						Data="M0,0 L1,0 L1,1 L0,1 Z"
						/>
					<Path
						Margin="0"
						Width="16"
						Height="16"
						Stretch="Uniform"
						Stroke="White"
						Visibility="{Binding ElementName=videoAspectRatioToggleButton,Path=IsChecked,Converter={StaticResource BoolToVisibilityConverter}}"
						Data="M0,0 L0.8,0 L0.8,0.6 L0,0.6 Z"
						/>
				</Grid>
			</ToggleButton>
		</Grid>

		<!-- Компонент удаляется из визуального дерева и помещается в playerPanel.BottomToolbarContent в конструкторе -->
		<Grid x:Name="bottomToolbarGrid" Background="{StaticResource BackgroundBrush}">
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="*"/>
				<ColumnDefinition Width="Auto"/>
			</Grid.ColumnDefinitions>
			<TextBlock Grid.Column="0" x:Name="streamInfoTextBlock"
					   VerticalAlignment="Center"
					   Foreground="White"
					   Margin="2">
				<TextBlock.Text>
					<MultiBinding StringFormat="{}{0}x{1} {2} к/с {3} kbps">
						<Binding ElementName="mediaPlayer" Path="FrameWidth"></Binding>
						<Binding ElementName="mediaPlayer" Path="FrameHeight"></Binding>
						<Binding ElementName="mediaPlayer" Path="Fps" Mode="OneWay"></Binding>
						<Binding ElementName="mediaPlayer"  Path="Bitrate" Mode="OneWay"></Binding>
					</MultiBinding>
				</TextBlock.Text>
			</TextBlock>
			<ToggleButton Grid.Column="1" x:Name="soundOnOfToggleButton"
						  Width="28"
						  Height="28"
						  Margin="0"
						  IsChecked="False"
						  ToolTip="Вкл/Выкл звук"
						  Checked="SoundOnOfToggleButton_OnChecked"
						  Unchecked="SoundOnOfToggleButton_OnUnchecked">
				<Grid>
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="10"/>
						<ColumnDefinition Width="*"/>
					</Grid.ColumnDefinitions>
					<Path Grid.Column="0"
						  Margin="0"
						  Width="8"
						  Height="16"
						  Stretch="Uniform"
						  Fill="White"
						  Data="F1 M 0,49.935L 29.4349,49.935L 52.1797,27.1895L 52.1797,106.128L 29.4349,83.3817L 0,83.3817 Z"/>
					<Path Grid.Column="1"
						  Margin="-5 0 0 0"
						  Width="14"
						  Height="20"
						  Stretch="Uniform"
						  Fill="White"
						  Visibility="{Binding ElementName=soundOnOfToggleButton,Path=IsChecked,Converter={StaticResource BoolToVisibilityConverter}}"
						  Data="F1 M  0,49.935 Z M 84.289,66.6591C 84.0768,81.3662 79.2526,93.7477 69.1628,104.483C 65.6119,108.265 59.9453,102.576 63.487,98.8075C 72.1367,89.6018 76.0781,79.2424 76.2617,66.6577C 76.0781,54.0751 72.1367,43.7138 63.487,34.5101C 59.9453,30.7419 65.6119,25.055 69.1628,28.8337C 79.2539,39.57 84.0768,51.952 84.289,66.6564L 84.289,66.6591 Z M 104.359,66.6591C 104.082,86.3465 97.332,104.018 83.7226,118.292C 80.1445,122.046 74.4753,116.362 78.0469,112.616C 90.1966,99.8727 96.0833,84.232 96.3307,66.6591C 96.0833,49.0868 90.1966,33.4468 78.0469,20.7021C 74.4753,16.9579 80.1445,11.2724 83.7226,15.0257C 97.332,29.2991 104.082,46.971 104.359,66.6564L 104.359,66.6591 Z M 124.427,66.6591C 124.15,91.4285 115.483,114.212 98.2852,132.104C 94.6927,135.841 89.0247,130.159 92.6094,126.43C 108.344,110.059 116.147,89.3205 116.4,66.6591C 116.146,43.9976 108.344,23.2593 92.6094,6.89081C 89.0247,3.16043 94.6941,-2.52386 98.2852,1.21506C 115.483,19.1044 124.15,41.8908 124.427,66.6591 Z "/>
					<Path Grid.Column="1"
						  Margin="0"
						  Width="10"
						  Height="10"
						  Fill="White"
						  Stretch="Uniform"
						  Visibility="{Binding ElementName=soundOnOfToggleButton,Path=IsChecked,Converter={StaticResource InversedBoolToVisibilityConverter}}"
						  Data="F1 M68.873398,59.4734 C77.143997,46.646702 75.166702,29.323999 63.464001,18.794701 C57.638699,13.552 50.121399,10.6667 42.292,10.6667 C35.022701,10.6667 28.009399,13.176 22.418699,17.6733 L68.873398,59.4734 z M21.096001,65.882698 C26.921301,71.125397 34.439999,74.010696 42.268002,74.010696 C49.344002,74.010696 56.172001,71.626701 61.683998,67.354698 L15.3534,25.6653 C11.9614,31.117399 10.3067,37.459999 10.652,44.006699 C11.0974,52.4547 14.8067,60.224098 21.096001,65.882698 z M70.599998,10.8641 C87.954597,26.48 89.369301,53.304001 73.753304,70.658699 C65.736,79.5681 54.261299,84.677399 42.268002,84.677399 C31.799999,84.677399 21.747999,80.818703 13.96,73.811996 C5.55334,66.248001 0.59600103,55.862701 0,44.569302 C-0.59600103,33.2761 3.2413299,22.426701 10.8067,14.0201 C18.822701,5.1093798 30.299999,6.10352E-05 42.292,6.10352E-05 C52.759998,6.10352E-05 62.812,3.8587 70.599998,10.8641 z" />
				</Grid>
			</ToggleButton>
		</Grid>
	</Grid>
</UserControl>
