@{
    Layout = null;
}

<div modal-draggable modaless>
    <div class="modal-header">
        <a class="close" href=""><img src="Content/Image/Icon/Header/close_pop.png" title="Закрыть" ng-click="cancel()" /></a>
        <h3 class="modal-title">{{ mpt.No}}.{{ mpt.Name}}</h3>
    </div>
    <div class="modal-body">
        <div>
            <div>
                <div ng-style="{'background-color': mpt.StateColor}" style="width: 50px; height: 50px; border-width: 2px; margin: 5px; float: left"></div>
                <div style="float: left; width: 200px">
                    <ul>
                        <li ng-repeat="stateClass in mpt.StateClasses">
                            <img style="margin: 2px; vertical-align:middle" ng-src="/Content/Image/Icon/GKStateIcons/{{stateClass.IconData}}.png" />
                            {{stateClass.Name}}
                        <li>
                    </ul>
                </div>
                <div style="float: right">
                    <div ng-show="mpt.HasOnDelay">
                        <span>Задержка на включение</span> <br />
                        <span>{{mpt.OnDelay}} сек</span>
                    </div>
                    <div ng-show="mpt.HasHoldDelay">
                        <span>Удержание</span> <br />
                        <span>{{mpt.HoldDelay}} сек</span>
                    </div>
                </div>
                <div style="clear: both">
                </div>
            </div>
            <uib-tabset>
                <uib-tab heading="Управление">
                    <div>
                        <img style="margin: 2px; vertical-align:middle" ng-src="/Content/Image/Icon/GKStateIcons/{{mpt.ControlRegimeIcon}}.png" />
                        <span style="font-weight: bold; font-size: large; margin: 5px">Режим</span>
                        <span style="font-weight: bold; font-size: large; margin: 5px">{{mpt.ControlRegimeName}}</span>
                    </div>
                    <div style="background: #fff">
                        <div style="float: left; width: 50%">
                            <div class="btn btn-primary" style="height: 50px; display: block; margin: 5px" ng-click="mpt.CanSetAutomaticState && SetAutomaticState()" ng-disabled="!mpt.CanSetAutomaticState">Автоматика</div>
                            <div class="btn btn-primary" style="height: 50px; display: block; margin: 5px" ng-click="mpt.CanSetManualState && SetManualState()" ng-disabled="!mpt.CanSetManualState">Ручное</div>
                            <div class="btn btn-primary" style="height: 50px; display: block; margin: 5px" ng-click="mpt.CanSetIgnoreState && SetIgnoreState()" ng-disabled="!mpt.CanSetIgnoreState">Отключение</div>
                        </div>
                        <div style="float: left; width: 50%; background: #fff">
                            <div class="btn btn-primary" style="height: 50px; display: block; margin: 5px" ng-click="mpt.IsControlRegime && TurnOn()" ng-disabled="!mpt.IsControlRegime">Пуск</div>
                            <div class="btn btn-primary" style="height: 50px; display: block; margin: 5px" ng-click="mpt.IsControlRegime && TurnOnNow()" ng-disabled="!mpt.IsControlRegime">Пуск немедленно</div>
                            <div class="btn btn-primary" style="height: 50px; display: block; margin: 5px" ng-click="mpt.IsControlRegime && TurnOff()" ng-disabled="!mpt.IsControlRegime">Стоп</div>
                            <div class="btn btn-primary" style="height: 50px; display: block; margin: 5px" ng-click="mpt.IsControlRegime && ForbidStart()" ng-disabled="!mpt.IsControlRegime">Осанов пуска</div>
                        </div>
                        <div style="clear: left">
                        </div>
                    </div>
                </uib-tab>
                <uib-tab heading="Свойства">
                    <div class="detailsTab">
                        <div class="properties">
                            @*<a href="" class="labelImage" style="background-image:url(/Content/Image/Icon/GK/BMPT.png)" ng-click="Show()">{{mpt.Name}}</a>*@
                            <a ui-sref="MPTs({uid: mpt.UID})" ui-sref-opts="{reload: true}" class="labelImage" style="background-image:url(/Content/Image/Icon/GK/BMPT.png)">{{mpt.Name}}</a>
                            <div>
                                <span>Номер в ГК:</span>
                                <span>{{mpt.GKDescriptorNo}}</span>
                            </div>
                            @*<a href="" class="labelImage" ng-click="ShowJournal()" style="background-image:url(/Content/Image/Icon/GK/BJournal.png)">Показать связанные события</a>*@
                            <a ui-sref="archive({uid: mpt.UID})" ui-sref-opts="{reload: true}" class="labelImage" style="background-image:url(/Content/Image/Icon/GK/BJournal.png)">Показать связанные события</a>
                            <div>
                                <span>Задержка: </span>
                                <span>{{mpt.Delay}}</span>
                            </div>
                            <a href="" class="labelImage" ng-click="ShowJournal()" style="background-image:url(/Content/Image/Icon/GK/BJournal.png)">Показать связанные события</a>
                        </div>
                    </div>
                </uib-tab>
            </uib-tabset>
        </div>
    </div>
</div>