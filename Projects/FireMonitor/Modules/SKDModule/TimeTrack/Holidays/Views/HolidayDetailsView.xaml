<UserControl
	x:Class="SKDModule.Views.HolidayDetailsView"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:controls="clr-namespace:Controls;assembly=Controls"
	Width="400"
	Height="250">
	<UserControl.Resources>
		<Style
			x:Key="DisabledTextBlockStyle"
			BasedOn="{StaticResource {x:Type TextBlock}}"
			TargetType="{x:Type TextBlock}">
			<Setter Property="Foreground" Value="White" />
			<Style.Triggers>
				<Trigger Property="IsEnabled" Value="False">
					<Setter Property="Foreground" Value="#A5FFFFFF" />
					<Setter Property="Opacity" Value="0.7" />
				</Trigger>
			</Style.Triggers>
		</Style>
		<Style
			x:Key="DatePickerWithErrorStyle"
			BasedOn="{StaticResource {x:Type DatePicker}}"
			TargetType="{x:Type DatePicker}">
			<Style.Setters>
				<Setter Property="Validation.ErrorTemplate" Value="{x:Null}"/>
			</Style.Setters>
		</Style>
	</UserControl.Resources>
	<Grid>
		<Grid.RowDefinitions>
			<RowDefinition Height="*"/>
			<RowDefinition Height="Auto"/>
		</Grid.RowDefinitions>
		<Grid Grid.Row="0">
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="*" />
				<ColumnDefinition Width="*" />
			</Grid.ColumnDefinitions>
			<Grid.RowDefinitions>
				<RowDefinition Height="Auto" />
				<RowDefinition Height="Auto" />
				<RowDefinition Height="Auto" />
				<RowDefinition Height="Auto" />
				<RowDefinition Height="Auto" />
			</Grid.RowDefinitions>
			<TextBlock
			Margin="5"
			VerticalAlignment="Center"
			Foreground="White"
			Text="Название" />
			<TextBox
			Grid.Column="1"
			MaxLength="50"
			Margin="5"
			VerticalAlignment="Center"
			Text="{Binding Name,
		                        UpdateSourceTrigger=PropertyChanged}" />

			<TextBlock
			Grid.Row="1"
			Margin="5"
			VerticalAlignment="Center"
			Foreground="White"
			Text="Тип" />
			<ComboBox
			Grid.Row="1"
			Grid.Column="1"
			Margin="5"
			VerticalAlignment="Center"
			ItemsSource="{Binding AvailableHolidayTypes}"
			SelectedItem="{Binding HolidayType}">
				<ComboBox.ItemTemplate>
					<DataTemplate>
						<StackPanel Orientation="Horizontal">
							<TextBlock
							VerticalAlignment="Center"
							Foreground="Black"
							Text="{Binding .,
						                          Converter={StaticResource EnumToDescriptionConverter}}" />
						</StackPanel>
					</DataTemplate>
				</ComboBox.ItemTemplate>
			</ComboBox>

			<TextBlock
			Grid.Row="2"
			Margin="5"
			VerticalAlignment="Center"
			Foreground="White"
			Text="Дата" />
			<DatePicker
			Style="{StaticResource DatePickerWithErrorStyle}"
			Grid.Row="2"
			Grid.Column="1"
			Width="140"
			Margin="5"
			HorizontalAlignment="Left"
			DisplayDate="{Binding Path=Date, UpdateSourceTrigger=PropertyChanged}"
			SelectedDate="{Binding Path=Date, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True, NotifyOnValidationError=True}"
			DisplayDateStart="{Binding SelectDateStartLimit, Mode=OneWay}"
			DisplayDateEnd="{Binding SelectDateEndLimit, Mode=OneWay}"/>
			<TextBlock
			Grid.Row="3"
			Margin="5"
			VerticalAlignment="Center"
			IsEnabled="{Binding IsReductionEnabled}"
			Style="{StaticResource DisabledTextBlockStyle}"
			Text="Величина сокращения" />
			<controls:TimePicker
			Grid.Row="3"
			Grid.Column="1"
			TimeSpan="{Binding TimeReduction, UpdateSourceTrigger=PropertyChanged}"
			IsEnabled="{Binding IsReductionEnabled}"
			Margin="5"/>

			<TextBlock
			Grid.Row="4"
			Margin="5"
			VerticalAlignment="Center"
			IsEnabled="{Binding IsTransferDateEnabled}"
			Style="{StaticResource DisabledTextBlockStyle}"
			Text="Дата переноса" />
			<DatePicker
			Style="{StaticResource DatePickerWithErrorStyle}"
			Grid.Row="4"
			Grid.Column="1"
			Width="140"
			Margin="5"
			HorizontalAlignment="Left"
			DisplayDate="{Binding TransferDate, UpdateSourceTrigger=PropertyChanged}"
			IsEnabled="{Binding IsTransferDateEnabled}"
			SelectedDate="{Binding TransferDate, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True, NotifyOnValidationError=True}" 
			DisplayDateStart="{Binding SelectDateStartLimit, Mode=OneWay}"
			DisplayDateEnd="{Binding SelectDateEndLimit, Mode=OneWay}"/>
		</Grid>
		<Border Grid.Row="1" BorderThickness="1" CornerRadius="3" Opacity="0.8" BorderBrush="{StaticResource BaseWindowBackgroundBrush}" Background="LightCoral" Padding="0">
			<Border.Style>
				<Style TargetType="{x:Type Border}">
					<Style.Triggers>
						<DataTrigger Binding="{Binding Error}" Value="">
							<Setter Property="Visibility" Value="Collapsed" />
						</DataTrigger>
					</Style.Triggers>
				</Style>
			</Border.Style>
			<TextBlock Text="{Binding Error, FallbackValue='* Ошибки валидации'}" VerticalAlignment="Center" FontSize="10" TextWrapping="Wrap" Margin="2">
			</TextBlock>
		</Border>
	</Grid>
</UserControl>