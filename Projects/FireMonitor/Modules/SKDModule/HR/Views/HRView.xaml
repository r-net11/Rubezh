<UserControl
	x:Class="SKDModule.Views.HRView"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:Views="clr-namespace:SKDModule.Views"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	xmlns:tree="clr-namespace:Controls.TreeList;assembly=Controls"
	d:DesignHeight="300"
	d:DesignWidth="1000"
	mc:Ignorable="d">
	<Grid>
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto" />
			<RowDefinition Height="*" />
		</Grid.RowDefinitions>
		<!-- Инструментальная панель для Картотеки -->
		<StackPanel Orientation="Horizontal">
			<!-- Набор инструментальных кнопок для вкладки "Сотрудники/Посетители" -->
			<StackPanel Orientation="Horizontal" Visibility="{Binding IsEmployeesSelected, Converter={StaticResource BoolToVisibilityConverter}}">
				<StackPanel DataContext="{Binding EmployeesViewModel}" Orientation="Horizontal">
					<StackPanel Orientation="Horizontal">
						<ToolBarButton
							Command="{Binding AddCommand}"
							ImageSource="Add"
							ToolTip="{Binding AddCommandToolTip}" />
						<ToolBarButton
							Command="{Binding RemoveCommand}"
							ImageSource="Delete"
							ToolTip="{Binding RemoveCommandToolTip}" />
						<ToolBarButton
							Command="{Binding EditCommand}"
							ImageSource="Edit"
							ToolTip="{Binding EditCommandToolTip}" />
						<ToolBarButton
							Command="{Binding RestoreCommand}"
							ImageSource="Redo"
							ToolTip="Восстановить"
							Visibility="{Binding IsWithDeleted, Converter={StaticResource BoolToVisibilityConverter}}" />
					</StackPanel>
				</StackPanel>
			</StackPanel>

			<!-- Набор инструментальных кнопок для вкладки "Подразделения" -->
			<Grid Visibility="{Binding IsDepartmentsSelected, Converter={StaticResource BoolToVisibilityConverter}}">
				<StackPanel DataContext="{Binding DepartmentsViewModel}" Orientation="Horizontal">
					<ToolBarButton
						Command="{Binding AddCommand}"
						ImageSource="Add"
						ToolTip="Добавить" />
					<ToolBarButton
						Command="{Binding RemoveCommand}"
						ImageSource="Delete"
						ToolTip="Удалить" />
					<ToolBarButton
						Command="{Binding EditCommand}"
						ImageSource="Edit"
						ToolTip="Редактировать" />
					<ToolBarButton
						Command="{Binding CopyCommand}"
						ImageSource="Copy"
						ToolTip="Копировать" />
					<ToolBarButton
						Command="{Binding PasteCommand}"
						ImageSource="Paste"
						ToolTip="Вставить" />
					<ToolBarButton
						Command="{Binding RestoreCommand}"
						ImageSource="Redo"
						ToolTip="Восстановить"
						Visibility="{Binding IsWithDeleted,
					                                    Converter={StaticResource BoolToVisibilityConverter}}" />
				</StackPanel>
			</Grid>

			<!-- Набор инструментальных кнопок для вкладки "Должности" -->
			<Grid Visibility="{Binding IsPositionsSelected, Converter={StaticResource BoolToVisibilityConverter}}">
				<StackPanel DataContext="{Binding PositionsViewModel}" Orientation="Horizontal">
					<ToolBarButton
						Command="{Binding AddCommand}"
						ImageSource="Add"
						ToolTip="Добавить" />
					<ToolBarButton
						Command="{Binding RemoveCommand}"
						ImageSource="Delete"
						ToolTip="Удалить" />
					<ToolBarButton
						Command="{Binding EditCommand}"
						ImageSource="Edit"
						ToolTip="Редактировать" />
					<ToolBarButton
						Command="{Binding CopyCommand}"
						ImageSource="Copy"
						ToolTip="Копировать" />
					<ToolBarButton
						Command="{Binding PasteCommand}"
						ImageSource="Paste"
						ToolTip="Вставить" />
					<ToolBarButton
						Command="{Binding RestoreCommand}"
						ImageSource="Redo"
						ToolTip="Восстановить"
						Visibility="{Binding IsWithDeleted,
					                                    Converter={StaticResource BoolToVisibilityConverter}}" />
				</StackPanel>
			</Grid>

			<!-- Набор инструментальных кнопок для вкладки "Дополнительные колонки" -->
			<Grid Visibility="{Binding IsAdditionalColumnTypesSelected, Converter={StaticResource BoolToVisibilityConverter}}">
				<StackPanel DataContext="{Binding AdditionalColumnTypesViewModel}" Orientation="Horizontal">
					<ToolBarButton
						Command="{Binding AddCommand}"
						ImageSource="Add"
						ToolTip="Добавить" />
					<ToolBarButton
						Command="{Binding RemoveCommand}"
						ImageSource="Delete"
						ToolTip="Удалить" />
					<ToolBarButton
						Command="{Binding EditCommand}"
						ImageSource="Edit"
						ToolTip="Редактировать" />
					<ToolBarButton
						Command="{Binding CopyCommand}"
						ImageSource="Copy"
						ToolTip="Копировать" />
					<ToolBarButton
						Command="{Binding PasteCommand}"
						ImageSource="Paste"
						ToolTip="Вставить" />
					<ToolBarButton
						Command="{Binding RestoreCommand}"
						ImageSource="Redo"
						ToolTip="Восстановить"
						Visibility="{Binding IsWithDeleted,
					                                    Converter={StaticResource BoolToVisibilityConverter}}" />
				</StackPanel>
			</Grid>

			<!-- Набор инструментальных кнопок для вкладки "Пропуска" -->
			<Grid Visibility="{Binding IsCardsSelected, Converter={StaticResource BoolToVisibilityConverter}}">
				<StackPanel DataContext="{Binding CardsViewModel}" Orientation="Horizontal">
					<ToolBarButton
						Command="{Binding RemoveCommand}"
						ImageSource="Delete"
						ToolTip="Удалить" />
					<ToolBarButton
						Command="{Binding ResetRepeatEnterForOrg}"
						Visibility="{Binding CanShowResetRepeatEnterButton, Converter={StaticResource BoolToVisibilityConverter}}"
						ImageSource="DropAllApb"
						ToolTip="Сброс ограничения на повторный прохов для ВСЕХ пропусков организации" />
				</StackPanel>
			</Grid>

			<!-- Набор инструментальных кнопок для вкладки "Шаблоны доступа" -->
			<Grid Visibility="{Binding IsAccessTemplatesSelected, Converter={StaticResource BoolToVisibilityConverter}}">
				<StackPanel DataContext="{Binding AccessTemplatesViewModel}" Orientation="Horizontal">
					<ToolBarButton
						Command="{Binding AddCommand}"
						ImageSource="Add"
						ToolTip="Добавить" />
					<ToolBarButton
						Command="{Binding RemoveCommand}"
						ImageSource="Delete"
						ToolTip="Удалить" />
					<ToolBarButton
						Command="{Binding EditCommand}"
						ImageSource="Edit"
						ToolTip="Редактировать" />
					<ToolBarButton
						Command="{Binding CopyCommand}"
						ImageSource="Copy"
						ToolTip="Копировать" />
					<ToolBarButton
						Command="{Binding PasteCommand}"
						ImageSource="Paste"
						ToolTip="Вставить" />
					<ToolBarButton
						Command="{Binding RestoreCommand}"
						ImageSource="Redo"
						ToolTip="Восстановить"
						Visibility="{Binding IsWithDeleted, Converter={StaticResource BoolToVisibilityConverter}}" />
					<ToolBarButton
						Command="{Binding ApplyToUserGroupCommand}"
						ImageSource="Users"
						ToolTip="Назначить шаблон доступа группе сотрудников (посетителей)" />
				</StackPanel>
			</Grid>

			<!-- Набор инструментальных кнопок для вкладки "Шаблоны пропусков" -->
			<Grid Visibility="{Binding IsPassCardTemplatesSelected, Converter={StaticResource BoolToVisibilityConverter}}">
				<StackPanel DataContext="{Binding PassCardTemplatesViewModel}" Orientation="Horizontal">
					<ToolBarButton
						Command="{Binding AddCommand}"
						ImageSource="Add"
						ToolTip="Добавить" />
					<ToolBarButton
						Command="{Binding RemoveCommand}"
						ImageSource="Delete"
						ToolTip="Удалить" />
					<ToolBarButton
						Command="{Binding EditCommand}"
						ImageSource="Edit"
						ToolTip="Редактировать" />
					<ToolBarButton
						Command="{Binding OpenDesignerCommand}"
						ImageSource="GraphicalDesigner"
						ToolTip="Дизайнер пропуска" />
					<ToolBarButton
						Command="{Binding CopyCommand}"
						ImageSource="Copy"
						ToolTip="Копировать" />
					<ToolBarButton
						Command="{Binding PasteCommand}"
						ImageSource="Paste"
						ToolTip="Вставить" />
					<ToolBarButton
						Command="{Binding RestoreCommand}"
						ImageSource="Redo"
						ToolTip="Восстановить"
						Visibility="{Binding IsWithDeleted,
					                                    Converter={StaticResource BoolToVisibilityConverter}}" />
				</StackPanel>
			</Grid>

			<!-- Набор инструментальных кнопок для вкладки "Организации" -->
			<Grid Visibility="{Binding IsOrganisationsSelected, Converter={StaticResource BoolToVisibilityConverter}}">
				<StackPanel Orientation="Horizontal">
					<StackPanel DataContext="{Binding OrganisationsViewModel}" Orientation="Horizontal">
						<ToolBarButton
							Command="{Binding AddCommand}"
							ImageSource="Add"
							ToolTip="Добавить" />
						<ToolBarButton
							Command="{Binding RemoveCommand}"
							ImageSource="Delete"
							ToolTip="Удалить" />
						<ToolBarButton
							Command="{Binding EditCommand}"
							ImageSource="Edit"
							ToolTip="Редактировать" />
						<ToolBarButton
							Command="{Binding RestoreCommand}"
							ImageSource="Redo"
							ToolTip="Восстановить"
							Visibility="{Binding IsWithDeleted,
						                                    Converter={StaticResource BoolToVisibilityConverter}}" />
					</StackPanel>
					<ToolBarButton
						Command="{Binding ChangeIsDeletedCommand}"
						ImageSource="Add"
						ToolTip="Отображать архивные сведения"
						Visibility="{Binding IsWithDeleted,
					                                    Converter={StaticResource BoolToVisibilityConverter}}" />
					<ToolBarButton
						Command="{Binding ChangeIsDeletedCommand}"
						ImageSource="Delete"
						ToolTip="Отображать архивные сведения"
						Visibility="{Binding IsWithDeleted,
					                                    Converter={StaticResource InversedBoolToVisibilityConverter}}" />
				</StackPanel>
			</Grid>

			<!-- Кнопка "Фильтр" общая для всех вкладок кроме вкладки "Организации" -->
			<ToolBarButton
				Command="{Binding EditFilterCommand}"
				ImageSource="{Binding FilterImageSource}"
				ToolTip="Фильтр"
				Visibility="{Binding IsOrganisationsSelected, Converter={StaticResource InversedBoolToVisibilityConverter}}" />

			<!-- Кнопка переключения режима просмотра "Сотрудник/Посетитель" для вкладки "Сотрудники/Посетители" -->
			<StackPanel Orientation="Horizontal" Visibility="{Binding IsEmployeesSelected, Converter={StaticResource BoolToVisibilityConverter}}">
				<Grid Visibility="{Binding CanSelectPersonType, Converter={StaticResource BoolToVisibilityConverter}}">
					<ComboBox
						Width="100"
						ItemsSource="{Binding PersonTypes}"
						SelectedItem="{Binding SelectedPersonType}">
						<ComboBox.ItemTemplate>
							<DataTemplate>
								<TextBlock Text="{Binding ., Converter={StaticResource EnumToDescriptionConverter}}" />
							</DataTemplate>
						</ComboBox.ItemTemplate>
					</ComboBox>
				</Grid>
			</StackPanel>
		</StackPanel>

		<TabControl Grid.Row="1">
			<!-- Вкладка "Сотрудники/Посетители" -->
			<TabItem
				Header="{Binding EmployeesViewModel.TabItemHeader}"
				IsSelected="{Binding IsEmployeesSelected}"
				Visibility="{Binding CanSelectEmployees, Converter={StaticResource BoolToVisibilityConverter}}">
				<Views:EmployeesView DataContext="{Binding EmployeesViewModel}" />
			</TabItem>

			<!-- Вкладка "Подразделения" -->
			<TabItem
				Header="Подразделения"
				IsSelected="{Binding IsDepartmentsSelected}"
				Visibility="{Binding CanSelectDepartments, Converter={StaticResource BoolToVisibilityConverter}}">
				<Views:DepartmentsView DataContext="{Binding DepartmentsViewModel}" />
			</TabItem>

			<!-- Вкладка "Должности" -->
			<TabItem
				Header="Должности"
				IsSelected="{Binding IsPositionsSelected}"
				Visibility="{Binding CanSelectPositions, Converter={StaticResource BoolToVisibilityConverter}}">
				<Views:PositionsView DataContext="{Binding PositionsViewModel}" />
			</TabItem>

			<!-- Вкладка "Дополнительные колонки" -->
			<TabItem
				Header="Дополнительные колонки"
				IsSelected="{Binding IsAdditionalColumnTypesSelected}"
				Visibility="{Binding CanSelectAdditionalColumns, Converter={StaticResource BoolToVisibilityConverter}}">
				<Views:AdditionalColumnTypesView DataContext="{Binding AdditionalColumnTypesViewModel}" />
			</TabItem>

			<!-- Вкладка "Пропуска" -->
			<TabItem
				Header="Пропуска"
				IsSelected="{Binding IsCardsSelected}"
				Visibility="{Binding CanSelectCards, Converter={StaticResource BoolToVisibilityConverter}}">
				<Views:CardsView DataContext="{Binding CardsViewModel}" />
			</TabItem>

			<!-- Вкладка "Шаблоны доступа" -->
			<TabItem
				Header="Шаблоны доступа"
				IsSelected="{Binding IsAccessTemplatesSelected}"
				Visibility="{Binding CanSelectAccessTemplates, Converter={StaticResource BoolToVisibilityConverter}}">
				<Views:AccessTemplatesView DataContext="{Binding AccessTemplatesViewModel}" />
			</TabItem>

			<!-- Вкладка "Шаблоны пропусков" -->
			<TabItem
				Header="Шаблоны пропусков"
				IsSelected="{Binding IsPassCardTemplatesSelected}"
				Visibility="{Binding CanSelectPassCardTemplates,
			                              Converter={StaticResource BoolToVisibilityConverter}}">
				<ContentPresenter Content="{Binding PassCardTemplatesViewModel}" />
			</TabItem>
		</TabControl>
	</Grid>
</UserControl>