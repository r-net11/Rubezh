<UserControl
	x:Class="SKDModule.Views.AccessDoorsSelectationView"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:Controls="clr-namespace:Controls;assembly=Controls"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	xmlns:tree="clr-namespace:Controls.TreeList;assembly=Controls"
	xmlns:viewModels="clr-namespace:SKDModule.ViewModels"
	d:DataContext="{d:DesignInstance viewModels:AccessDoorsSelectationViewModel,
                                              IsDesignTimeCreatable=True}"
	d:DesignHeight="400"
	d:DesignWidth="400"
	mc:Ignorable="d">

	<Grid>
		<Grid.RowDefinitions>
			<RowDefinition Height="*" />
			<RowDefinition Height="150" />
		</Grid.RowDefinitions>
		<Grid
			Grid.Row="0"
			Margin="2"
			ScrollViewer.IsDeferredScrollingEnabled="True"
			VirtualizingStackPanel.VirtualizationMode="Recycling">
			<DataGrid
				Margin="2"
				CanUserResizeColumns="True"
				CanUserSortColumns="True"
				ItemsSource="{Binding Doors}"
				SelectedItem="{Binding SelectedDoor}">
				<DataGrid.Columns>
					<DataGridTemplateColumn
						Width="40"
						Header="№"
						SortMemberPath="No">
						<DataGridTemplateColumn.CellTemplate>
							<DataTemplate>
								<TextBlock Margin="4 0 0 0" Text="{Binding No}" />
							</DataTemplate>
						</DataGridTemplateColumn.CellTemplate>
					</DataGridTemplateColumn>
					<DataGridTemplateColumn
						Width="*"
						Header="Точка доступа"
						SortMemberPath="Name">
						<DataGridTemplateColumn.CellTemplate>
							<DataTemplate>
								<StackPanel Orientation="Horizontal">
									<CheckBox
										Margin="2"
										VerticalAlignment="Center"
										IsChecked="{Binding IsChecked,
									                              Mode=TwoWay,
									                              UpdateSourceTrigger=PropertyChanged}" />
									<Image
										Margin="4 0 0 0"
										VerticalAlignment="Center"
										Source="/Controls;component/Images/Door.png" />
									<TextBlock
										Margin="4 0 0 0"
										HorizontalAlignment="Stretch"
										VerticalAlignment="Center"
										Text="{Binding Name}" />
								</StackPanel>
							</DataTemplate>
						</DataGridTemplateColumn.CellTemplate>
					</DataGridTemplateColumn>
				</DataGrid.Columns>
			</DataGrid>
		</Grid>
		<Grid
			Grid.Row="1"
			Margin="2"
			Visibility="{Binding HasSelectedDoor,
		                           Converter={StaticResource BoolToVisibilityConverter}}">
			<Grid DataContext="{Binding SelectedDoor}">
				<StackPanel IsEnabled="{Binding IsChecked}">
					<StackPanel Visibility="{Binding HasEnter, Converter={StaticResource BoolToVisibilityConverter}}">
						<TextBlock
							Width="200"
							Margin="2"
							HorizontalAlignment="Left"
							Foreground="White"
							Text="График доступа" />
						<ComboBox
							Margin="2"
							ItemsSource="{Binding EnterSchedules}"
							SelectedItem="{Binding SelectedEnterSchedule}">
							<ComboBox.ItemTemplate>
								<DataTemplate>
									<TextBlock Margin="2" Text="{Binding Name}" />
								</DataTemplate>
							</ComboBox.ItemTemplate>
						</ComboBox>
					</StackPanel>
				</StackPanel>
			</Grid>
		</Grid>
	</Grid>
</UserControl>