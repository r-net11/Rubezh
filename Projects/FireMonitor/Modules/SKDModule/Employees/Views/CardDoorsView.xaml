<UserControl
	x:Class="SKDModule.Views.CardDoorsView"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:behaviours="clr-namespace:Controls.Behaviours;assembly=Controls"
	xmlns:comparers="clr-namespace:SKDModule.Employees.Comparers"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	xmlns:scm="clr-namespace:System.ComponentModel;assembly=WindowsBase"
	xmlns:viewModels="clr-namespace:SKDModule.ViewModels"
    xmlns:lang="clr-namespace:Localization.SKD.Views;assembly=Localization"
	d:DataContext="{d:DesignInstance viewModels:CardDoorsViewModel,
                                              IsDesignTimeCreatable=True}"
	d:DesignWidth="500"
	mc:Ignorable="d">
	<UserControl.Resources>
		<comparers:DoorsComparer x:Key="DoorsComparer" />
		<CollectionViewSource x:Key="cvsDoors" Source="{Binding Doors}">
			<CollectionViewSource.SortDescriptions>
				<scm:SortDescription PropertyName="No" />
			</CollectionViewSource.SortDescriptions>
		</CollectionViewSource>
	</UserControl.Resources>
	<DataGrid
		CanUserResizeRows="True"
		CanUserSortColumns="True"
		Focusable="True"
		ItemsSource="{Binding Source={StaticResource cvsDoors}}"
		SelectedItem="{Binding SelectedDoor}"
		behaviours:CustomSortBehaviour.AllowCustomSort="True">
		<DataGrid.Columns>
			<DataGridTemplateColumn
				Width="40"
				Header="№"
				SortMemberPath="No">
				<DataGridTemplateColumn.CellTemplate>
					<DataTemplate>
						<TextBlock Margin="4 0 0 0" Text="{Binding No}" />
					</DataTemplate>
				</DataGridTemplateColumn.CellTemplate>
			</DataGridTemplateColumn>
			<DataGridTemplateColumn
				Width="250"
				Header="{x:Static lang:CommonViews.Door}"
				SortMemberPath="Name">
				<DataGridTemplateColumn.CellTemplate>
					<DataTemplate>
						<StackPanel Orientation="Horizontal">
							<Image
								Margin="4 0 0 0"
								VerticalAlignment="Center"
								Source="/Controls;component/Images/Door.png" />
							<TextBlock
								Margin="2 0 0 0"
								HorizontalAlignment="Stretch"
								VerticalAlignment="Center"
								Text="{Binding Name}" />
						</StackPanel>
					</DataTemplate>
				</DataGridTemplateColumn.CellTemplate>
			</DataGridTemplateColumn>
			<DataGridTemplateColumn
				Width="*"
				Header="{x:Static lang:CommonViews.AccessSchedule}"
				CanUserSort="True"
				SortMemberPath="EnerScheduleName"
				behaviours:CustomSortBehaviour.CustomSorter="{StaticResource DoorsComparer}">
				<DataGridTemplateColumn.CellTemplate>
					<DataTemplate>
						<TextBlock Margin="4 0 0 0" Text="{Binding EnerScheduleName}" />
					</DataTemplate>
				</DataGridTemplateColumn.CellTemplate>
			</DataGridTemplateColumn>
		</DataGrid.Columns>
	</DataGrid>
</UserControl>