<UserControl
	x:Class="SKDModule.Views.EmployeeListView"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	xmlns:lang="clr-namespace:Localization.SKD.Views;assembly=Localization"
	xmlns:langCommon="clr-namespace:Localization.SKD.Common;assembly=Localization"
	d:DesignHeight="300"
	d:DesignWidth="300"
	mc:Ignorable="d">
	<UserControl.Resources>
		<Style
			x:Key="IsDepartmentDeletedStyle"
			BasedOn="{StaticResource {x:Type TextBlock}}"
			TargetType="{x:Type TextBlock}">
			<Style.Triggers>
				<DataTrigger Binding="{Binding IsDepartmentDeleted}" Value="True">
					<Setter Property="Foreground" Value="Gray" />
				</DataTrigger>
			</Style.Triggers>
		</Style>
		<Style
			x:Key="IsPositionDeletedStyle"
			BasedOn="{StaticResource {x:Type TextBlock}}"
			TargetType="{x:Type TextBlock}">
			<Style.Triggers>
				<DataTrigger Binding="{Binding IsPositionDeleted}" Value="True">
					<Setter Property="Foreground" Value="Gray" />
				</DataTrigger>
			</Style.Triggers>
		</Style>
	</UserControl.Resources>
	<Grid>
		<Grid.RowDefinitions>
			<RowDefinition Height="*" />
			<RowDefinition Height="Auto" />
		</Grid.RowDefinitions>
		<FrameworkElement x:Name="dummyElement" Visibility="Collapsed" />
		<DataGrid
			Grid.Row="0"
			ItemsSource="{Binding Employees}"
			SelectedItem="{Binding SelectedEmployee}">
			<DataGrid.Columns>
                <DataGridTemplateColumn Width="*" Header="{x:Static lang:CommonViews.FullName}">
					<DataGridTemplateColumn.CellTemplate>
						<DataTemplate>
							<StackPanel Orientation="Horizontal">
								<Image
									Width="16"
									Margin="1 0"
									VerticalAlignment="Center"
									Source="/Controls;component/Images/Employee.png" />
								<TextBlock Style="{StaticResource IsDeletedStyle}" Text="{Binding Employee.Name}" />
							</StackPanel>
						</DataTemplate>
					</DataGridTemplateColumn.CellTemplate>
				</DataGridTemplateColumn>
				<DataGridTemplateColumn
					Width="*"
					Header="{x:Static langCommon:CommonResources.Department}"
					Visibility="{Binding DataContext.CanEditDepartment,
				                                             Source={x:Reference dummyElement},
				                                             Converter={StaticResource BoolToVisibilityConverter}}">
					<DataGridTemplateColumn.CellTemplate>
						<DataTemplate>
							<TextBlock
								Margin="2"
								Style="{StaticResource IsDepartmentDeletedStyle}"
								Text="{Binding Employee.DepartmentName}" />
						</DataTemplate>
					</DataGridTemplateColumn.CellTemplate>
				</DataGridTemplateColumn>
				<DataGridTemplateColumn
					Width="*"
					Header="{x:Static langCommon:CommonResources.Position}"
					Visibility="{Binding DataContext.CanEditPosition,
				                                             Source={x:Reference dummyElement},
				                                             Converter={StaticResource BoolToVisibilityConverter}}">
					<DataGridTemplateColumn.CellTemplate>
						<DataTemplate>
							<TextBlock
								Margin="2"
								Style="{StaticResource IsPositionDeletedStyle}"
								Text="{Binding Employee.PositionName}" />
						</DataTemplate>
					</DataGridTemplateColumn.CellTemplate>
				</DataGridTemplateColumn>
			</DataGrid.Columns>
		</DataGrid>
		<StackPanel Grid.Row="1" Orientation="Horizontal">
			<StackPanel Orientation="Horizontal">
				<ToolBarButton
					Command="{Binding AddCommand}"
					ImageSource="Add"
					ToolTip="{x:Static langCommon:CommonResources.AddEmpl}" />
				<ToolBarButton
					Command="{Binding RemoveCommand}"
					ImageSource="Delete"
					ToolTip="{x:Static lang:CommonViews.DeleteEmpl}" />
				<ToolBarButton
					Command="{Binding EditCommand}"
					ImageSource="Edit"
					ToolTip="{x:Static lang:CommonViews.EditEmpl}" />
			</StackPanel>
		</StackPanel>
	</Grid>
</UserControl>
