<UserControl
	x:Class="AutomationModule.Views.ProceduresView"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:views="clr-namespace:AutomationModule.Views"
	xmlns:scm="clr-namespace:System.ComponentModel;assembly=WindowsBase"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
	xmlns:res="clr-namespace:AutomationModule.Resources.Language
	mc:Ignorable="d"
	d:DesignHeight="300"
	d:DesignWidth="300">
	<UserControl.Resources>
	<CollectionViewSource x:Key="cvsProcedures" Source="{Binding Procedures}">
		<CollectionViewSource.SortDescriptions>
			<scm:SortDescription PropertyName="Name" />
		</CollectionViewSource.SortDescriptions>
	</CollectionViewSource>
	</UserControl.Resources>
		<Grid>
		<Grid.ColumnDefinitions>
			<ColumnDefinition Width="*" MinWidth="300" />
			<ColumnDefinition Width= "5" />
			<ColumnDefinition Width="2*" MinWidth="400"/>
		</Grid.ColumnDefinitions>
		<Grid>
			<DataGrid
				ItemsSource="{Binding Source={StaticResource cvsProcedures}}"
				SelectedItem="{Binding SelectedProcedure}"
				IsReadOnly="False">
				<DataGrid.Columns>
					<DataGridTemplateColumn
						Header="{x:Static res:ProceduresView.Name}"
						Width="*">
						<DataGridTemplateColumn.CellTemplate>
							<DataTemplate>
								<StackPanel Orientation="Horizontal">
									<Image
										VerticalAlignment="Center"
										Source="/Controls;component/Images/ProcedureYellow.png"
										Margin="2 0 0 0" />
									<TextBlock
										Text="{Binding Name}"
										HorizontalAlignment="Stretch"
										VerticalAlignment="Center"
										Margin="2 0" />
								</StackPanel>
							</DataTemplate>
						</DataGridTemplateColumn.CellTemplate>
					</DataGridTemplateColumn>
				</DataGrid.Columns>
			</DataGrid>
		</Grid>
		<Grid
			Grid.Column="2"
			Visibility="{Binding ., Converter={StaticResource NullToVisibilityConverter}}" DataContext="{Binding SelectedProcedure}">
			<Grid>
				<Grid.RowDefinitions>
					<RowDefinition Height="30"/>
					<RowDefinition/>
				</Grid.RowDefinitions>
				<Button
					Content="{x:Static res:ProceduresView.Execute}"
					Width="100"
					Command="{Binding RunCommand}"
					Margin ="8, 0"
					HorizontalAlignment="Left"/>
				<views:ArgumentsView
					Grid.Row="1"
					DataContext="{Binding ArgumentsViewModel}" />
			</Grid>
		</Grid>
	</Grid>
</UserControl>