<UserControl x:Class="ReportsModule.Views.FilterMainPageView"
			 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
			 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
			 xmlns:API="clr-namespace:StrazhAPI.SKD.ReportFilters;assembly=StrazhAPI"
			 xmlns:Converters="clr-namespace:ReportsModule.Converters"
			 xmlns:SimpleConverters="clr-namespace:Controls.Converters;assembly=Controls"
			 xmlns:behaviours="clr-namespace:Controls.Behaviours;assembly=Controls"
			 xmlns:lang="clr-namespace:Localization.Reports.Views;assembly=Localization">
	<UserControl.Resources>
        <IfConverter x:Key="AdditionalLinkText" FalseValue="{x:Static lang:CommonViews.ShowReportViewSettings}" TrueValue="{x:Static lang:CommonViews.HideReportViewSettings}" />
		<Style x:Key="label" BasedOn="{StaticResource {x:Type TextBlock}}" TargetType="{x:Type TextBlock}">
			<Setter Property="HorizontalAlignment" Value="Right" />
			<Setter Property="Foreground" Value="White" />
			<Setter Property="VerticalAlignment" Value="Center" />
			<Setter Property="Margin" Value="2" />
		</Style>
		<Converters:ReportPeriodTypeToBoolConverter x:Key="ReportPeriodTypeToBoolConverter" />
		<SimpleConverters:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter" />
		<SimpleConverters:InverseBooleanConverter x:Key="InverseBooleanConverter" />
	</UserControl.Resources>
	<Grid>
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto" />
			<RowDefinition Height="Auto" />
			<RowDefinition Height="Auto" />
			<RowDefinition Height="Auto" />
			<RowDefinition Height="Auto" />
			<RowDefinition Height="Auto" />
			<RowDefinition Height="*" />
		</Grid.RowDefinitions>
		<Grid>
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="*" />
				<ColumnDefinition Width="2*" />
			</Grid.ColumnDefinitions>
			<TextBlock
				Style="{StaticResource label}"
				Text="{x:Static lang:CommonViews.Filter}" />
			<StackPanel
				Grid.Column="1"
				Orientation="Horizontal">
				<ComboBox
					Width="240"
					Margin="2"
					DisplayMemberPath="Name"
					IsEditable="True"
					ItemsSource="{Binding Filters}"
					SelectedItem="{Binding SelectedFilter}"
					Text="{Binding FilterName}" />
				<ToolBarButton
					ImageSource="Save"
					Command="{Binding SaveFilterCommand}"
					ToolTip="{x:Static lang:CommonViews.Save}" />
				<ToolBarButton
					ImageSource="Close"
					Command="{Binding RemoveFilterCommand}"
					ToolTip="{x:Static lang:CommonViews.Delete}" />
			</StackPanel>
		</Grid>
		<Grid Grid.Row="1" Visibility="{Binding HasPeriod, Mode=OneTime, Converter={StaticResource BoolToVisibilityConverter}}">
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="*" />
				<ColumnDefinition Width="2*" />
			</Grid.ColumnDefinitions>
			<Grid.RowDefinitions>
				<RowDefinition />
				<RowDefinition />
				<RowDefinition />
			</Grid.RowDefinitions>
			<TextBlock
				Style="{StaticResource label}"
				Text="{x:Static lang:CommonViews.FormationPeriod}" />
			<TextBlock
				Grid.Row="1"
				Style="{StaticResource label}"
				Text="{x:Static lang:CommonViews.StartDate}" />
			<TextBlock
				Grid.Row="2"
				Style="{StaticResource label}"
				Text="{x:Static lang:CommonViews.EndDate}" />
			<ComboBox
				Grid.Column="1"
				Width="240"
				Margin="2"
				HorizontalAlignment="Left"
				ItemsSource="{Binding Source={x:Type API:ReportPeriodType}, Converter={StaticResource EnumToItemsSourceConverter}}"
				ItemTemplate="{StaticResource EnumDescriptionTemplate}"
				SelectedItem="{Binding SelectedReportPeriod}" />
			<DatePicker
				behaviours:DatePickerCustomWatermark.Watermark="{StaticResource WatermarkColor}"
				behaviours:DatePickerCustomWatermark.WatermarkText="{x:Static lang:CommonViews.DateMask}"
				Validation.ErrorTemplate="{x:Null}"
				DisplayDateStart="{Binding MinDate}"
				DisplayDateEnd="{Binding MaxDate, Mode=OneWay}"
				Grid.Column="1"
				Grid.Row="1"
				SelectedDateFormat="Short"
				SelectedDate="{Binding DateTimeFrom, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
				IsEnabled="{Binding SelectedReportPeriod, Converter={StaticResource ReportPeriodTypeToBoolConverter}}"
				HorizontalAlignment="Left"
				Margin="2"
				VerticalContentAlignment="Center"
				VerticalAlignment="Center"
				Width="150"/>
			<DatePicker
				behaviours:DatePickerCustomWatermark.Watermark="{StaticResource WatermarkColor}"
				behaviours:DatePickerCustomWatermark.WatermarkText="{x:Static lang:CommonViews.DateMask}"
				Validation.ErrorTemplate="{x:Null}"
				DisplayDateStart="{Binding MinDate, Mode=OneWay}"
				DisplayDateEnd="{Binding MaxDate, Mode=OneWay}"
				Grid.Column="1"
				Grid.Row="2"
				SelectedDateFormat="Short"
				SelectedDate="{Binding DateTimeTo, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
				IsEnabled="{Binding SelectedReportPeriod, Converter={StaticResource ReportPeriodTypeToBoolConverter}}"
				HorizontalAlignment="Left"
				VerticalAlignment="Center"
				Margin="2"
				Width="150"/>
		</Grid>
		<StackPanel
			Grid.Row="2"
			Margin="5"
			Visibility="{Binding HasBalanceVariation, Converter={StaticResource BoolToVisibilityConverter}}">
			<TextBlock
				Text="{x:Static lang:CommonViews.BalanceCalculate}"
				Foreground="White"
				Margin="0 5"/>
			<RadioButton
				Content="{x:Static lang:CommonViews.ConsiderOvertimeWithoutDoc}"
				Foreground="White"
				Margin="5"
				IsChecked="{Binding AllowOnlyAcceptedOvertime, Converter={StaticResource InverseBooleanConverter}}"/>
			<RadioButton
				Content="{x:Static lang:CommonViews.ConsiderOvertimeWithDoc}"
				Foreground="White"
				Margin="5"
				IsChecked="{Binding AllowOnlyAcceptedOvertime}"/>
		</StackPanel>
		<CheckBox
			Grid.Row="3"
			VerticalAlignment="Center"
			Content="{x:Static lang:CommonViews.ShowArchiveInfo}"
			Foreground="White"
			IsChecked="{Binding UseArchive}"
			Visibility="{Binding HasArchive, Converter={StaticResource BoolToVisibilityConverter}}" />
		<ContentPresenter
			Grid.Row="4"
			Content="{Binding MainViewModel, Mode=OneTime}" />
		<TextBlock
			Grid.Row="5"
			Visibility="{Binding IsAdditionalExpanded, Converter={StaticResource InversedBoolToVisibilityConverter}}">
			<Hyperlink
				Command="{Binding ExpandAdditionalCommand}"
				Style="{StaticResource HyperlinkStyle}">
				<TextBlock
					Margin="2"
					Text="{x:Static lang:CommonViews.ShowReportViewSettings}"
					TextDecorations="Underline" />
			</Hyperlink>
		</TextBlock>
		<GroupBox
			Grid.Row="6"
			Padding="10"
			Visibility="{Binding IsAdditionalExpanded, Converter={StaticResource BoolToVisibilityConverter}}">
			<GroupBox.Header>
				<TextBlock VerticalAlignment="Center">
					<Hyperlink
						Command="{Binding ExpandAdditionalCommand}"
						Style="{StaticResource HyperlinkStyle}">
						<TextBlock
							Margin="2"
							Text="{x:Static lang:CommonViews.HideReportViewSettings}"
							TextDecorations="Underline" />
					</Hyperlink>
				</TextBlock>
			</GroupBox.Header>
			<StackPanel>
				<CheckBox
					Margin="4"
					Content="{x:Static lang:CommonViews.ShowFilterName}"
					Foreground="White"
					IsChecked="{Binding PrintFilterName}" />
				<CheckBox
					Margin="4"
					Content="{x:Static lang:CommonViews.ShowFilterNameInTitle}"
					Foreground="White"
					IsChecked="{Binding PrintFilterNameInHeader}" />
				<CheckBox
					Margin="4"
					Content="{x:Static lang:CommonViews.FormationPeriod}"
					Foreground="White"
					IsChecked="{Binding PrintPeriod}"
					Visibility="{Binding HasPeriod, Converter={StaticResource BoolToVisibilityConverter}, Mode=OneTime}" />
				<CheckBox
					Margin="4"
					Content="{x:Static lang:CommonViews.ShowFormationDate}"
					Foreground="White"
					IsChecked="{Binding PrintDate}" />
				<CheckBox
					Margin="4"
					Content="{x:Static lang:CommonViews.ShowUserInfo}"
					Foreground="White"
					IsChecked="{Binding PrintUser}" />
			</StackPanel>
		</GroupBox>
	</Grid>
</UserControl>
