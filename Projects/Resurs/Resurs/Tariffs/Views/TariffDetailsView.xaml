<UserControl x:Class="Resurs.Views.TariffDetailsView"
			 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
			 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
			 MinWidth="900" MinHeight="350">
	<StackPanel Orientation="Horizontal">
		<Grid x:Name="meControl">
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="205" />
				<ColumnDefinition Width="150" />
			</Grid.ColumnDefinitions>
			<Grid.RowDefinitions>
				<RowDefinition Height="Auto" />
				<RowDefinition Height="Auto" />
				<RowDefinition Height="Auto" />
				<RowDefinition Height="Auto" />
				<RowDefinition Height="Auto" />
				<RowDefinition Height="Auto" />
			</Grid.RowDefinitions>
			<TextBlock Grid.Column="0" Grid.Row="0" HorizontalAlignment="Right" VerticalAlignment="Center" Style="{DynamicResource TextBlockDetailsStyle}" Text="Название тарифа" />
			<TextBox Grid.Column="1" Grid.Row="0" Text="{Binding Name}" VerticalAlignment="Center" MaxLength="100" Margin="5" />

			<TextBlock Grid.Column="0" Grid.Row="1" HorizontalAlignment="Right" VerticalAlignment="Center" Style="{DynamicResource TextBlockDetailsStyle}" Text="Описание" />
			<TextBox Grid.Column="1" Grid.Row="1" Text="{Binding Description}" VerticalAlignment="Center" MaxLength="100" Margin="5" />

			<TextBlock Grid.Column="0" Grid.Row="2" HorizontalAlignment="Right" VerticalAlignment="Center" Style="{DynamicResource TextBlockDetailsStyle}" Text="Тип ресурса" />
			<ComboBox Grid.Column="1" Grid.Row="2" ItemsSource="{Binding TariffType}"  SelectedItem="{Binding SelectedTariffType}" VerticalAlignment="Center" Margin="5" >
				<ComboBox.ItemTemplate>
					<DataTemplate>
						<TextBlock Text="{Binding ., Converter={StaticResource EnumToDescriptionConverter}}" Margin="1" />
					</DataTemplate>
				</ComboBox.ItemTemplate>
			</ComboBox>

			<TextBlock Grid.Column="0" Grid.Row="3" HorizontalAlignment="Right" VerticalAlignment="Center" Style="{DynamicResource TextBlockDetailsStyle}" Text="Льготный тариф" Visibility="{Binding IsNew, Converter={StaticResource BoolToVisibilityConverter}}" />
			<CheckBox Grid.Column="1" Grid.Row="3" VerticalAlignment="Center" IsChecked="{Binding IsDiscount}" Visibility="{Binding IsNew, Converter={StaticResource BoolToVisibilityConverter}}" />

			<TextBlock Grid.Column="0" Grid.Row="4" HorizontalAlignment="Right" VerticalAlignment="Center" Style="{DynamicResource TextBlockDetailsStyle}" Text="Количество тарифных интервалов" />
			<ComboBox Grid.Column="1" Grid.Row="4" ItemsSource="{Binding TariffPartsNumberEnum}" SelectedItem="{Binding SelectedTariffPartsNumber}" VerticalAlignment="Center" Margin="5" />

			<StackPanel Grid.Column="0" Grid.Row="5" Margin="5">
				<TextBlock Margin="5">
					<Hyperlink Command="{Binding EditDevicesCommand}" Style="{StaticResource HyperlinkStyle}">
						<TextBlock Text="Привязать устройства" />
					</Hyperlink>
				</TextBlock>
			</StackPanel>
		</Grid>
		<ScrollViewer VerticalAlignment="Stretch" HorizontalAlignment="Stretch" VerticalScrollBarVisibility="Auto">
			<ItemsControl ItemsSource="{Binding TariffParts}">
				<ItemsControl.ItemTemplate>
					<DataTemplate>
						<Border CornerRadius="3" Background="#7bb2d8" Margin="1">
						<Grid>
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="Auto" />
								<ColumnDefinition Width="Auto" />
							</Grid.ColumnDefinitions>
							<Grid.RowDefinitions>
								<RowDefinition Height="Auto" />
							</Grid.RowDefinitions>
							<Grid Grid.Column="0" Grid.Row="0">
								<Grid.ColumnDefinitions>
									<ColumnDefinition Width="160" />
									<ColumnDefinition Width="70" />
								</Grid.ColumnDefinitions>
								<Grid.RowDefinitions>
									<RowDefinition Height="Auto" />
									<RowDefinition Height="Auto" />
									<RowDefinition Height="Auto" />
								</Grid.RowDefinitions>
								<TextBlock Grid.Column="0" Grid.Row="0" Margin="5 5 5 2" Text="Цена за единицу ресурса" Style="{DynamicResource TextBlockDetailsStyle}" />
								<TextBlock Grid.Column="0" Grid.Row="1" Margin="5 2 5 2" Text="Начало" Style="{DynamicResource TextBlockDetailsStyle}" />
								<TextBlock Grid.Column="0" Grid.Row="2" Margin="5 2 5 5" Text="Конец" Style="{DynamicResource TextBlockDetailsStyle}" />
								<TextBox	Grid.Column="1" Grid.Row="0" Margin="5 5 5 2" Text="{Binding Price}" Width="60" MinWidth="60" />
									<TimePicker Grid.Column="1" Grid.Row="1" Margin="5 2 5 2" TimeSpan="{Binding StartTime, RelativeSource={RelativeSource TemplatedParent}}" IsFullDay="True" Height="25" Width="60" />
									<TimePicker Grid.Column="1" Grid.Row="2" Margin="5 2 5 5" TimeSpan="{Binding DataContext.EndTime}" IsFullDay="True" Height="25" Width="60" />
							</Grid>
							<Grid Grid.Column="1" Grid.Row="0" Visibility="{Binding ElementName=meControl, Path=DataContext.IsDiscount, Converter={StaticResource BoolToVisibilityConverter}}">
								<Grid.ColumnDefinitions>
									<ColumnDefinition Width="Auto" />
									<ColumnDefinition Width="Auto" />
								</Grid.ColumnDefinitions>
								<Grid.RowDefinitions>
									<RowDefinition Height="Auto" />
									<RowDefinition Height="Auto" />
								</Grid.RowDefinitions>
								<TextBlock Grid.Column="0" Grid.Row="0" Margin="4" Text="Цена до исчерпания льготного порога" Style="{DynamicResource TextBlockDetailsStyle}" />
								<TextBlock Grid.Column="0" Grid.Row="1" Margin="4" Text="Льготный порог" Style="{DynamicResource TextBlockDetailsStyle}" />
								<TextBox Grid.Column="1" Grid.Row="0" Margin="4" Text="{Binding Discount}" Width="60" MinWidth="60" />
								<TextBox Grid.Column="1" Grid.Row="1" Margin="4" Text="{Binding Threshold}" Width="60" MinWidth="60" />
							</Grid>
						</Grid>
						</Border>
					</DataTemplate>
				</ItemsControl.ItemTemplate>
			</ItemsControl>
		</ScrollViewer>
	</StackPanel>
</UserControl>