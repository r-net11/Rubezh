<UserControl
	x:Class="VideoModule.Views.CamerasView"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:drag="clr-namespace:Infrastructure.Common.Services.DragDrop;assembly=Infrastructure.Common"
    xmlns:lang="clr-namespace:Localization.Video;assembly=Localization">
	<UserControl.Resources>
		<SwitchConverter x:Key="Tooltip" Else="{x:Null}">
			<SwitchCase Then="{x:Static lang:CommonViews.CameraCanPlacedOnPlan}" When="Multiple" />
            <SwitchCase Then="{x:Static lang:CommonViews.CameraNotPlacedOnPlan}" When="NotPresent" />
            <SwitchCase Then="{x:Static lang:CommonViews.CameraCanNotPlacedOnPlan}" When="Prohibit" />
            <SwitchCase Then="{x:Static lang:CommonViews.CameraPlacedOnPlan}" When="Single" />
		</SwitchConverter>
		<ContextMenu x:Key="CameraContextMenu">
			<IconedMenuItem
				Command="{Binding AddCommand}"
				ImageSource="BAdd"
				Text="{x:Static lang:CommonViews.Add}" />
			<IconedMenuItem
				Command="{Binding DeleteCommand}"
				ImageSource="BDelete"
				Text="{x:Static lang:CommonViews.Delete}" />
			<IconedMenuItem
				Command="{Binding EditCommand}"
				ImageSource="BEdit"
				Text="{x:Static lang:CommonViews.Edit}" />
			<Separator />
			<IconedMenuItem
				Command="{Binding SelectedCamera.AllowMultipleVizualizationCommand}"
				CommandParameter="{StaticResource True}"
				ImageSource="Eye2"
				Text="{x:Static lang:CommonViews.AllowMultipleVisualization}" />
			<IconedMenuItem
				Command="{Binding SelectedCamera.AllowMultipleVizualizationCommand}"
				CommandParameter="{StaticResource False}"
				ImageSource="Eye3"
				Text="{x:Static lang:CommonViews.DenyMultipleVisualization}" />
		</ContextMenu>
	</UserControl.Resources>
	<XDataGrid
		ContextMenu="{StaticResource CameraContextMenu}"
		Focusable="True"
		ItemsSource="{Binding Cameras}"
		SelectedItem="{Binding SelectedCamera}">
		<DataGrid.Columns>
			<DataGridTemplateColumn Width="*" Header="{x:Static lang:CommonResources.Camera}">
				<DataGridTemplateColumn.CellTemplate>
					<DataTemplate>
						<StackPanel Orientation="Horizontal">
							<drag:DragDropDecorator
								AllowSimulateDrag="True"
								DragCommand="{Binding CreateDragObjectCommand}"
								DragVisualProvider="{Binding CreateDragVisual}"
								DynamicCursor="True"
								IsSource="True">
								<Image
									Margin="2 0 0 0"
									Source="{Binding VisualizationState, Converter={StaticResource VisualizationStateToImageSourceConverter}}"
									ToolTip="{Binding VisualizationState, Converter={StaticResource Tooltip}}" />
							</drag:DragDropDecorator>
							<StackPanel Orientation="Horizontal">
								<Grid
									Width="16"
									Height="16"
									Margin="5 0 5 0"
									HorizontalAlignment="Left"
									Background="{DynamicResource BVideo}" />
								<TextBlock
									HorizontalAlignment="Left"
									VerticalAlignment="Center"
									Text="{Binding Camera.Name, UpdateSourceTrigger=PropertyChanged}" />
							</StackPanel>
						</StackPanel>
					</DataTemplate>
				</DataGridTemplateColumn.CellTemplate>
			</DataGridTemplateColumn>
			<DataGridTextColumn
				Width="*"
				Binding="{Binding PresentationAddress}"
				Header="{x:Static lang:CommonViews.Address}" />
		</DataGrid.Columns>
	</XDataGrid>
</UserControl>