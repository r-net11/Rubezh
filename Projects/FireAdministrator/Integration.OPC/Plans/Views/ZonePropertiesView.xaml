<UserControl
	x:Class="Integration.OPC.Views.ZonePropertiesView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:models="clr-namespace:Integration.OPC.Models"
	xmlns:enums="clr-namespace:StrazhAPI.Enums;assembly=StrazhAPI"
	xmlns:converters="clr-namespace:Controls.Converters;assembly=Controls"
	xmlns:lang="clr-namespace:Localization.IntegrationOPC.Views;assembly=Localization"
	mc:Ignorable="d"
    MinHeight="300"
	MinWidth="600"
	MaxHeight="300"
	MaxWidth="600">
	<UserControl.Resources>
		<converters:VisualizationStateToImageSourceConverter x:Key="VisualizationStateToImageSourceConverter" />
	</UserControl.Resources>
	<Grid>
		<Grid.RowDefinitions>
			<RowDefinition />
			<RowDefinition Height="Auto" />
		</Grid.RowDefinitions>
		<DataGrid
			ItemsSource="{Binding Zones}"
			SelectedItem="{Binding SelectedZone}"
			CanUserSortColumns="True"
			CanUserReorderColumns="False">
			<DataGrid.Columns>
				<DataGridTemplateColumn
					Header="№"
					Width="Auto"
					SortMemberPath="No"
					CanUserResize="False">
					<DataGridTemplateColumn.CellTemplate>
						<DataTemplate DataType="{x:Type models:OPCZone}">
							<StackPanel Orientation="Horizontal">
								<Image
									Margin="5 2 0 2"
									VerticalAlignment="Center">
									<Image.Style>
										<Style TargetType="{x:Type Image}">
											<Style.Triggers>
												<DataTrigger Binding="{Binding Type}" Value="{x:Static enums:OPCZoneType.Fire}">
													<Setter Property="Source" Value="/Controls;component/Images/FireZone.png" />
												</DataTrigger>
												<DataTrigger Binding="{Binding Type}" Value="{x:Static enums:OPCZoneType.Guard}">
													<Setter Property="Source" Value="/Controls;component/Images/GuardZone.png" />
												</DataTrigger>
											</Style.Triggers>
										</Style>
									</Image.Style>
								</Image>
								<TextBlock
									Text="{Binding No}"
									VerticalAlignment="Center"
									Margin="5 0"/>
							</StackPanel>
						</DataTemplate>
					</DataGridTemplateColumn.CellTemplate>
				</DataGridTemplateColumn>
                <DataGridTemplateColumn Header="{x:Static lang:CommonViews.Denomination}" Width="2*" SortMemberPath="Name">
					<DataGridTemplateColumn.CellTemplate>
						<DataTemplate DataType="{x:Type models:OPCZone}">
							<StackPanel Orientation="Horizontal">
								<Image
									Margin="5 2 0 0"
									Source="{Binding VisualizationState, Converter={StaticResource VisualizationStateToImageSourceConverter}}"
									VerticalAlignment="Center"/>
								<TextBlock
									Text="{Binding Name}"
									VerticalAlignment="Center"
									Margin="5 0"/>
							</StackPanel>
						</DataTemplate>
					</DataGridTemplateColumn.CellTemplate>
				</DataGridTemplateColumn>
                <DataGridTemplateColumn Header="{x:Static lang:CommonViews.Purpose}" Width="*" SortMemberPath="Type">
					<DataGridTemplateColumn.CellTemplate>
						<DataTemplate DataType="{x:Type models:OPCZone}">
							<TextBlock
								Text="{Binding Type}"
								VerticalAlignment="Center"
								Margin="5 0"/>
						</DataTemplate>
					</DataGridTemplateColumn.CellTemplate>
				</DataGridTemplateColumn>
                <DataGridTemplateColumn Header="{x:Static lang:CommonViews.Note}" Width="*" SortMemberPath="Description">
					<DataGridTemplateColumn.CellTemplate>
						<DataTemplate DataType="{x:Type models:OPCZone}">
							<TextBlock
								Text="{Binding Description}"
								VerticalAlignment="Center"
								Margin="5 0"/>
						</DataTemplate>
					</DataGridTemplateColumn.CellTemplate>
				</DataGridTemplateColumn>
			</DataGrid.Columns>
		</DataGrid>
		<Button
			Grid.Row="1"
			Width="100"
			Margin="0 5"
			Command="{Binding ShowPropertyCommand}"
			Content="{x:Static lang:CommonViews.Propeties}"
			HorizontalAlignment="Right"/>
	</Grid>
</UserControl>
